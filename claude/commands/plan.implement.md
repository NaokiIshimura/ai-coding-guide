---
allowed-tools: Task, Read, Bash(TZ='Asia/Tokyo' date '+%Y_%m%d_%H%M_%S'), Write, Glob
description: 実装計画に基づいて実装を開始する
---

## コンテキスト

- 実装計画ディレクトリのパスが提供されている場合は、その情報を使用してください
- 実装計画ディレクトリのパスが提供されていない場合は、ユーザーにディレクトリパスの入力を求めてください
- タスク識別子は実装計画ディレクトリ名を使用してください
  - 例: `.claude/tasks/ABC-123/` の場合、タスク識別子は `ABC-123`

## タスク

既に作成済みの実装計画（plan.md、requirements.md、design.md、tasks.md）に基づいて実装を開始してください。

**重要**: 実装を開始する前に、必ず実装計画ディレクトリのパスを取得し、実装計画の内容を正確に理解してください。

### 実行手順

1. **ディレクトリパスの確認**
   - ユーザーから実装計画ディレクトリのパスが提供されている場合は、それを使用
   - 提供されていない場合は、ユーザーにディレクトリパスの入力を求める
   - 例: `.claude/tasks/ABC-123/`

2. **実装計画ファイルの検索と検証**
   - ディレクトリ内の最新の plan.md を検索
     ```bash
     ls -t <ディレクトリ>/*plan*.md 2>/dev/null | head -1
     ```
   - ディレクトリ内の最新の requirements.md を検索
     ```bash
     ls -t <ディレクトリ>/*requirements*.md 2>/dev/null | head -1
     ```
   - ディレクトリ内の最新の design.md を検索
     ```bash
     ls -t <ディレクトリ>/*design*.md 2>/dev/null | head -1
     ```
   - ディレクトリ内の最新の tasks.md を検索
     ```bash
     ls -t <ディレクトリ>/*tasks*.md 2>/dev/null | head -1
     ```
   - いずれかのファイルが存在しない場合は警告を表示し、続行するか確認を取得

3. **実装計画の読み込みと提示**
   - plan.md の内容を読み込み（存在する場合）
   - requirements.md の内容を読み込み（存在する場合）
   - design.md の内容を読み込み（存在する場合）
   - tasks.md の内容を読み込み
   - 実装計画の概要をユーザーに提示：
     - 実装計画のサマリー（plan.md がある場合）
     - 要件のサマリー（requirements.md がある場合）
     - 設計のサマリー（design.md がある場合）
     - タスク一覧と進捗状態（🔴未着手/🟡進行中/🟢完了/⚠️ブロック）

4. **実装開始の確認**
   - ユーザーに実装を開始してよいか確認
   - 特定のタスクから開始する場合は、タスクIDを指定できるようにする（オプション）

5. **タスク実行**
   - Taskツールで `tasks-executor` エージェントを呼び出し、実装を実行
   - 呼び出し時に以下の情報を渡す：
     - tasks.md のパス
     - plan.md のパス（存在する場合）
     - requirements.md のパス（存在する場合）
     - design.md のパス（存在する場合）
     - 開始タスクID（指定がある場合）

6. **実装結果の報告**
   - 完了したタスクのサマリー
   - 残りのタスク一覧
   - 次のステップの提案

### 注意事項

- **実装計画ディレクトリのパスを取得せずに作業を開始しないでください**
- **実装前にユーザーの確認を得てください**
- **既存コードの修正を行う場合は、要件を満たすための最低限の修正のみを行ってください**
  - 不要なリファクタリングや改善は避ける
  - スコープ外の変更は行わない
  - 既存のコードスタイルやパターンを極力維持する
- **明示的な指示なしにgit commitを実行しないでください**
- **tasks.mdを更新する際は、新しいタイムスタンプで新規ファイルを作成してください**
  - 既存のファイルは上書きしない
  - タイムスタンプ: `TZ='Asia/Tokyo' date '+%Y_%m%d_%H%M_%S'`

### 期待される動作

このコマンドは以下のようなワークフローで使用されます：

```bash
# 1. 実装計画を作成
/plan.create

# 2. 作成された実装計画を確認・編集
# （ユーザーが手動で plan/requirements/design/tasks.md を確認・修正）

# 3. 実装計画に基づいて実装を開始
/plan.implement

# 4. 実装完了後、コミット・プッシュ・PR作成
/git.commit.push.pr
```
