---
allowed-tools: Task
description: markdownファイルの情報を元に開発を実施する
---

## コンテキスト

- markdownファイルのパスが提供されている場合は、その情報を使用してください
- markdownファイルパスが提供されていない場合は、ユーザーにファイルパスの入力を求めてください
- ブランチ名はmarkdownファイルの親ディレクトリ名を使用してください
  - 例: `/path/to/ABC-123/requirements.md` の場合、ブランチ名は `ABC-123`

## タスク

markdownファイルに関する以下のタスクを実行してください：

**重要**: 実装を開始する前に、必ずmarkdownファイルのパスを取得し、要件を正確に理解してください。

### ファイルパスの取得手順

1. **ファイルパスの確認**
   - ユーザーからmarkdownファイルのパスが提供されている場合は、それを使用
   - 提供されていない場合は、ユーザーにファイルパスの入力を求める
2. markdownファイルの内容を読み込み
3. 親ディレクトリ名を取得してブランチ名として使用
4. リポジトリのREADME確認
   - プロジェクト理解とセットアップ方法の確認
5. `.claude/plans/<親ディレクトリ名>/` フォルダを作成（存在しない場合）

6. 収集した情報を基に実装計画を作成
   - Taskツールで `spec-writer` エージェントを呼び出し、以下の3つのドキュメントを作成：
     1. 仕様書（requirements.md）
     2. 設計書（design.md）
     3. タスクリスト（tasks.md）
   - 呼び出し時に以下の情報を渡す：
     - タスク識別子（親ディレクトリ名）
     - markdownファイルから収集した情報のサマリー
     - 出力先ディレクトリ: `.claude/plans/<親ディレクトリ名>/`
   - ファイル名: `YYYY_MMDD_HHMM_SS_<ドキュメント種別>.md`（日本時間のタイムスタンプ）
     - 例: 2025年01月02日03時04分05秒の場合 → `2025_0102_0304_05_requirements.md`
7. **実装計画と作成したドキュメントをユーザーに提示し、プラン通りに実施してよいか確認を取得**
8. ユーザーの承認を得た後、親ディレクトリ名のブランチを作成して作業を実施
9. 実装完了後、作業結果をユーザーに報告

### 注意事項

- 実装前にmarkdownファイルの要件、受け入れ条件、関連情報を必ず確認してください
- **markdownファイルのパスを取得せずに作業を開始しないでください**
- **実装計画作成後は必ずユーザーの確認と承認を得てから実装を開始してください**
- **既存コードの修正を行う場合は、要件を満たすための最低限の修正のみを行ってください**
  - 不要なリファクタリングや改善は避ける
  - スコープ外の変更は行わない
  - 既存のコードスタイルやパターンを極力維持する
- 収集した情報は実装計画に反映し、より正確で実現可能な計画を作成してください
- **タスクの実行にあたって調査結果などをmarkdownファイルに出力する際には、コマンド実行時に与えたmarkdownファイルと同じディレクトリに作成してください**
- **requirements.md, design.md, tasks.mdファイルを更新する際には、新しいタイムスタンプ（YYYY_MMDD_HHMM_SS_）を付与した新しいファイルを作成してください**
  - 既存のファイルは上書きせず、新しいタイムスタンプのファイルとして保存してください
  - これにより、ファイルの更新履歴が保持されます

