---
allowed-tools: Write, Read, Bash(git:*), Bash(date:*), Glob, Grep
description: 現在までの作業状況・調査結果をmarkdownファイルに出力する
---

## コンテキスト

- 現在のブランチ: !`git branch --show-current`
- 現在のディレクトリ: !`pwd`
- 現在の日時: !`date +"%Y-%m-%d %H:%M:%S"`

## タスク

現在までの作業状況や調査結果を整理して、構造化されたmarkdownファイルとして出力してください。

### 実施手順

1. **出力内容の確認**
   - ユーザーに以下を確認：
     - 出力したい内容（作業状況、調査結果、実装計画、課題リストなど）
     - 出力ファイル名（未指定の場合は自動生成）
     - 出力先ディレクトリ（デフォルト: `claude/outputs/`）

2. **情報の収集と整理**
   - 現在の作業状況を分析
   - 関連するファイルや変更内容を確認
   - git差分がある場合は変更内容を要約
   - 必要に応じて既存のドキュメントや設定を参照

3. **markdownファイルの構成**
   以下のセクションを含む構造化されたドキュメントを作成：

   ```markdown
   # [タイトル]

   ## 概要
   - 作業の目的や背景
   - 調査の対象や範囲

   ## 実施日時
   - 開始日時
   - 完了日時（進行中の場合は現在日時）

   ## 作業内容 / 調査結果
   ### [セクション1]
   - 詳細な内容

   ### [セクション2]
   - 詳細な内容

   ## 成果物
   - 作成・変更したファイル一覧
   - 主要な変更内容

   ## 発見事項・課題
   - 発見した重要なポイント
   - 解決すべき課題
   - 今後の検討事項

   ## 参考情報
   - 参照したドキュメント
   - 関連するリンク

   ## 次のステップ
   - 今後実施すべき作業
   - 推奨される改善策
   ```

4. **ファイル名の生成**
   未指定の場合、以下の形式で自動生成：
   - パターン: `YYYY-MM-DD_HH-MM-SS_<トピック>.md`
   - 例: `2025-10-18_14-30-00_api-investigation.md`

5. **ファイルの出力**
   - 指定されたディレクトリにmarkdownファイルを出力
   - ディレクトリが存在しない場合は作成
   - 既存ファイルとの重複をチェック

6. **出力完了の報告**
   - 出力したファイルのパス
   - ファイルサイズ
   - 主要なセクション数や内容の要約

### 出力オプション

ユーザーは以下のオプションを指定できます：

- **トピック名**: ファイル名に含めるトピック識別子
- **出力形式**:
  - `standard`: 標準的な作業レポート形式（デフォルト）
  - `investigation`: 調査レポート形式
  - `plan`: 実装計画書形式
  - `summary`: 簡潔なサマリー形式
- **詳細度**:
  - `brief`: 簡潔な要約のみ
  - `normal`: 通常の詳細度（デフォルト）
  - `detailed`: 詳細な情報を含む

### 注意事項

- **機密情報の保護**: パスワード、APIキー、トークンなどの機密情報は出力しない
- **タイムスタンプ**: ファイル名と内容にタイムスタンプを含める
- **構造化**: 読みやすく構造化されたフォーマットを使用
- **コードスニペット**: 必要に応じてコードブロックを使用（言語指定を含む）
- **リンク**: 関連ファイルやドキュメントへの相対パスを含める
- **一貫性**: プロジェクト内の他のドキュメントと一貫性のある形式を使用

### 期待される成果

1. 作業内容が明確に文書化される
2. 後から参照しやすい構造化されたドキュメント
3. チーム内での情報共有が容易になる
4. 作業履歴のトレーサビリティが確保される
