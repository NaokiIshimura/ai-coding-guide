---
allowed-tools: Bash(mkdir:*), Bash(ls:*), Bash(cat:*), Bash(git:*), Read, Write
description: .claude/tasks配下にタスク用ディレクトリを準備する
---

## コンテキスト

- 現在のブランチ: !`git branch --show-current`
- 現在のディレクトリ: !`pwd`
- 既存のtasksディレクトリ: !`ls -la .claude/tasks/ 2>/dev/null || echo "tasks directory not found"`

## タスク

新しいタスクを開始するための準備を行ってください。
具体的には、`.claude/tasks`配下に指定された名前のディレクトリを作成し、タスクに必要なマークダウンファイルを準備します。

### 実施手順

1. **ディレクトリ名の確認**
   - ユーザーに作成するディレクトリ名を確認
   - ディレクトリ名が未指定の場合は質問する
   - チケット番号（例: ABC-123）またはtmpなどの任意の名前を受け付ける

2. **ディレクトリの確認と作成**
   - `.claude/tasks`ディレクトリが存在しない場合は作成
   - 指定されたディレクトリが既に存在する場合は通知
   - 存在しない場合は新規作成

3. **マークダウンファイルの確認と作成**
   - 作成したディレクトリ内のマークダウンファイル（*.md）を確認
   - マークダウンファイルが存在する場合:
     - 各ファイルの内容を読み込んで確認
     - ファイル一覧と内容をユーザーに報告
   - マークダウンファイルが存在しない場合:
     - `request.md`を作成（空ファイル）
     - 作成したことをユーザーに報告

4. **作成結果の報告**
   - 作成したディレクトリの絶対パス
   - ディレクトリの一覧表示（`ls -la .claude/tasks/`）
   - マークダウンファイルの状態（存在する場合は内容、存在しない場合は新規作成したこと）

### 使用例

```bash
# チケット番号でディレクトリを準備
/task-dir-create ABC-123

# 一時作業用ディレクトリを準備
/task-dir-create tmp

# 任意の名前でディレクトリを準備
/task-dir-create feature-investigation
```

### 注意事項

- ディレクトリ名には有効なファイルシステム文字のみを使用してください
- 既存のディレクトリを上書きしません
- 作成したディレクトリは`.claude/.gitignore`の設定に従ってgit管理対象外となります
- このディレクトリは一時ファイルの整理に使用されます
- マークダウンファイルが既に存在する場合は、内容を確認するのみで新規作成は行いません
