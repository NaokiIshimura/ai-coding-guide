---
allowed-tools: mcp_jira, Task
description: JIRAチケットの情報を取得・操作する
---

## コンテキスト

- JIRAのURLやチケット番号が提供されている場合は、その情報を使用してください
- チケット番号が提供されていない場合は、現在のブランチ名からチケット番号を推測してください
  - ブランチ名のパターン例: `feature/ABC-123`, `ABC-123-feature`, `ABC-123`, `feature-ABC-123`
  - 推測できない場合のみ、ユーザーにチケット番号の入力を求めてください

## タスク

JIRAチケットに関する以下のタスクを実行してください：

**重要**: 実装を開始する前に、必ずJIRAチケットの番号を取得し、要件を正確に理解してください。

### チケット番号の取得手順

1. **チケット番号の確認・推測**
   - ユーザーからJIRAのURLやチケット番号が提供されている場合は、それを使用
   - 提供されていない場合は、現在のgitブランチ名からチケット番号を推測
     - 一般的なパターン（ABC-123形式）をブランチ名から抽出
     - 推測成功時は、推測したチケット番号をユーザーに確認
   - ブランチ名からチケット番号を推測できない場合のみ、ユーザーにチケット番号の入力を求める

2. チケットの詳細情報を取得
3. チケットのコメントを取得
4. チケットのサブタスクを取得
5. リポジトリのREADME確認
   - プロジェクト理解とセットアップ方法の確認
6. 関連情報の収集（sub-agentを使用）
   - 関連JIRAチケットの調査には `jira-collector` エージェントを使用
   - Slack議論履歴の調査には `slack-collector` エージェントを使用
   - 既存コードの調査には `code-collector` エージェントを使用
   - 関連PRの調査には `pr-collector` エージェントを使用
   - 技術ドキュメントの調査には `confluence-collector` エージェントを使用
   - 必要に応じて複数のエージェントを並行実行
7. 収集した情報を基にチケットの内容に基づいて実装計画（plan）を作成
8. **実装計画をユーザーに提示し、プラン通りに実施してよいか確認を取得**
9. ユーザーの承認を得た後、チケット番号のブランチを作成して作業を実施
10. 実装完了後、作業結果をユーザーに報告

### 注意事項

- JIRAへのアクセスにはJIRA MCPを使用してください（@~/ai-coding-guide/guides/mcp.md 参照）
- 実装前にチケットの要件、受け入れ条件、関連情報を必ず確認してください
- **JIRAチケットの番号を取得せずに作業を開始しないでください**
- **実装計画作成後は必ずユーザーの確認と承認を得てから実装を開始してください**
- **既存コードの修正を行う場合は、チケットの要件を満たすための最低限の修正のみを行ってください**
  - 不要なリファクタリングや改善は避ける
  - チケットのスコープ外の変更は行わない
  - 既存のコードスタイルやパターンを極力維持する
- sub-agentを使用する際は、並行実行可能なタスクは同時に実行して効率化を図ってください
- 収集した情報は実装計画に反映し、より正確で実現可能な計画を作成してください
