---
description: markdownファイルを操作する（output, input）
allowed-tools: Write, Read, Bash(git:*), Bash(date:*), Bash(ls:*), Bash(find:*), Glob, Grep, Task
---

## 概要

markdownファイルの入出力を行います。作業状況の出力や、過去の作業履歴の読み込みを実行できます。

## コンテキスト

- 現在のブランチ: !`git branch --show-current`
- 現在のディレクトリ: !`pwd`
- 現在の日時（日本時間）: !`TZ='Asia/Tokyo' date +"%Y-%m-%d %H:%M:%S"`

## 対応操作

### 1. 出力（output）

現在までの作業状況や調査結果を、構造化されたmarkdownファイルとして出力します。

**出力先:**
- チケット番号あり: `.claude/plans/<チケット番号>/`
- チケット番号なし: `.claude/plans/tmp/`

**ファイル名形式:**
- パターン: `YYYY_MMDD_HHMM_SS_<トピック>.md`
- 日本時間を使用

**ドキュメント構成:**
```markdown
# [タイトル]

## 概要
- 作業の目的や背景

## 実施日時
- 開始日時
- 完了日時

## 作業内容 / 調査結果
### [セクション1]
- 詳細な内容

## 成果物
- 作成・変更したファイル一覧

## 発見事項・課題
- 発見した重要なポイント
- 解決すべき課題

## 次のステップ
- 今後実施すべき作業
```

**出力オプション:**
- `standard`: 標準的な作業レポート形式（デフォルト）
- `investigation`: 調査レポート形式
- `plan`: 実装計画書形式
- `summary`: 簡潔なサマリー形式

### 2. 入力（input）

指定ディレクトリ内のmarkdownファイルを読み込み、過去の作業状況を把握します。

**読み込み対象:**
- 引数指定あり: 指定されたパス
- 引数指定なし: `claude/outputs/`（デフォルト）

**実施手順:**

1. markdownファイルを検索（タイムスタンプ順）
2. 各ファイルの主要情報を抽出:
   - タイトルと概要
   - 実施日時
   - 作業内容/調査結果の要約
   - 発見事項・課題
   - 次のステップ
3. 情報を統合・要約

**出力形式:**
```markdown
# 過去の作業状況サマリー

## 読み込んだファイル一覧
1. [ファイル名] - [日時] - [トピック]

## 時系列での作業履歴
### [日付1]
- 実施した作業
- 主要な成果
- 発見した課題

## 未解決の課題・継続タスク
- 課題1: 詳細と優先度

## 次に取り組むべき項目
1. 優先度の高い項目
```

**大量ファイル対応:**
- 10件以上のファイルがある場合は `file-collector` エージェントを使用
- メインタスクのコンテキストを節約

## 注意事項

- 機密情報（パスワード、APIキー等）は出力しない
- タイムスタンプは日本時間を使用
- 構造化された読みやすいフォーマットを使用

## タスク

ユーザーの指示に基づいて、markdownファイルの入出力操作を実行してください。

出力時は内容を確認し、入力時は統合した情報をわかりやすく提示してください。
